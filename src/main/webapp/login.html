<!doctype html>
<html class="no-js" lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="author" content="@ebring" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<style type="text/css">
	body {
	    background-color: #1d8bd8;
	    width: 100%;
	    height: 100%;
	    overflow: hidden;
	    padding: 0px;
	    margin: 0px;
	}
	.center{text-align: center;}
	.loginForm{display: inline-block;}
	.logos {
	    background: url(../images/logo.png) no-repeat;
	    margin-left: 35px;
	    height: 238px;
	    width: 653px;
	    margin-top: -74px;
	}
	.tips {
	    color: red;
	    margin-top: 3%;
	    width: 220px;
	    width: 220px;
	}
	input.loginField {
	    border-radius: 30px;
	    margin-bottom: 5px;
	    height: 38px;
	    line-height: 26px;
	    width: 320px;
	    font-size: 23px;
	    outline-color: invert;
	    outline-style: none;
	    padding-left: 17px;
	    outline-width: 0px;
	    border: none;
	    border-style: none;
	    text-shadow: none;
	    -webkit-appearance: none;
	    -webkit-user-select: text;
	    outline-color: transparent;
	    box-shadow: none;
	}
	.btns#login {
	    height: 43px;
	    width: 166px;
	    border-radius: 30px;
	    border: none;
	    background-color: #66d354;
	    color: #fff;
	    font-size: 23px;
	    font-family: 微软雅黑;
	    margin-top: 15px;
	}
	</style>
</head>
<body>

	<div class="backgs">
		<div class="center">
			<div class="logos"></div>
			<div class="loginForm">
				<p class="tips">&nbsp;</p>
				<input id="username" style="margin-top: 2px;" name="username"
					type="text" class="loginField" placeholder="用户名">
				<div class="psw">
					<input id="password" style="margin-top: 15px;" name="password"
						type="password" class="loginField" placeholder="密码">
				</div>
				<button id="login" class="btns">登录</button>
			</div>

		</div>
		<div class="footer">
			<div class=""></div>
		</div>
	</div>


	<script type="text/javascript" src="platform/lib/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="platform/lib/jquery.md5.js"></script>
	<script type="text/javascript">
		(function() {

			var loginLocked = false;
			function login() {
				if (loginLocked) {
					return;
				} else {
					loginLocked = true;
					window.setTimeout(function() {
						loginLocked = false;
					}, 50);
				}

				if ($("#username").val() === '') {
					$(".tips").text("请录入用户名！");

					return;
				} else if ($("#password").val() === '') {
					$(".tips").text("请录入密码！");
					return;
				}

				var jsonData = {};
				jsonData["username"] = $("#username").val();
				jsonData["password"] = $.md5($("#password").val());
				$.ajax({
							"type" : "POST",
							"contentType" : "application/json; charset=utf-8",
							"url" : "login.do",
							"dataType" : "json",
							"data" : JSON.stringify(jsonData), //以json格式传递
							"cache" : false,
							"success" : function(result) {
								console.info(result);
								if (result.SUCCESS) {
									if ($.browser.msie)
										window.location.href = 'platform/main.html';
									else
										window.location.href = './platform/main.html';

									return;
								} else {
									$(".tips").text(result.data);

								}
							},
							"error" : function(errinfo) {
								console.info(errinfo);
							}
						});

			};


			$("#login").click(login);
			$("#username,#password").keydown(function() {
				if (event.keyCode === 13) {
					login();
				}
			});
			$("input").focus(function() {
				$(".tips").html("&nbsp");
			});
		}())
	</script>
</body>
</html>
